package tests

import (
	s "server/infra/storage"
	"server/log"
	"server/utils"
	"strings"
	"testing"
	"time"
)

func TestSplit(t *testing.T) {
	gClient := s.NewGCSClient("project_id")

	if gClient == nil {
		log.Errorf("create google client")
	}
	filename := "hello.jpg"
	content := "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"
	bucket := "dev-qt"

	ojbTypeIndex := strings.LastIndex(filename, ".")
	ojbType := filename[ojbTypeIndex:]
	objName := time.Unix(time.Now().Unix(), 0).Format("2006-01-02_15-04-05")
	objName += ojbType

	picContent, err := utils.Base64Decode(content)
	if err != nil {
		log.Errorf(err.Error())
	}

	uri, err := gClient.WriteObjectToBucket(bucket, "test/"+objName, picContent)
	if err != nil {
		log.Errorf(err.Error())
	}
	t.Log(uri)

}
